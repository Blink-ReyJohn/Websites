<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Reset Password</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
   body {
     font-family: 'Segoe UI', sans-serif;
     background-color: #f5f7fa;
     display: flex;
     justify-content: center;
     align-items: center;
     height: 100vh;
     margin: 0;
   }
   .card {
     background-color: #fff;
     padding: 40px;
     border-radius: 10px;
     box-shadow: 0 0 15px rgba(0,0,0,0.1);
     width: 100%;
     max-width: 400px;
     text-align: center;
   }
   .card h2 {
     margin-bottom: 20px;
     color: #333;
   }
   input[type="password"] {
     width: 100%;
     padding: 12px;
     margin: 10px 0 20px;
     border: 1px solid #ccc;
     border-radius: 6px;
     font-size: 16px;
   }
   button {
     width: 100%;
     padding: 12px;
     background-color: #4CAF50;
     color: white;
     border: none;
     border-radius: 6px;
     font-size: 16px;
     cursor: pointer;
     transition: background-color 0.3s ease;
   }
   button:hover {
     background-color: #45a049;
   }
   .message {
     margin-top: 20px;
     font-size: 15px;
     color: #555;
   }
   .error {
     color: #d9534f;
   }
   .success {
     color: #28a745;
   }
</style>
</head>
<body>
<div class="card">
<h2>Reset Your Password</h2>
<form id="resetForm">
<input type="password" id="newPassword" placeholder="Enter new password" required>
<button type="submit">Reset Password</button>
</form>
<div id="message" class="message"></div>
</div>
<script>
   const token = new URLSearchParams(window.location.search).get("token");
   const form = document.getElementById("resetForm");
   const messageDiv = document.getElementById("message");
   if (!token) {
     messageDiv.textContent = "Invalid or missing token.";
     messageDiv.classList.add("error");
     form.style.display = "none";
   }
   form.addEventListener("submit", async (e) => {
     e.preventDefault();
     const newPassword = document.getElementById("newPassword").value;
     const res = await fetch("https://your-api-name.onrender.com/reset_password", {
       method: "POST",
       headers: { "Content-Type": "application/json" },
       body: JSON.stringify({ token, new_password: newPassword })
     });
     const data = await res.json();
     if (res.ok) {
       messageDiv.textContent = data.message || "Password successfully reset.";
       messageDiv.classList.remove("error");
       messageDiv.classList.add("success");
       form.reset();
       form.style.display = "none";
     } else {
       messageDiv.textContent = data.detail || "An error occurred.";
       messageDiv.classList.remove("success");
       messageDiv.classList.add("error");
     }
   });
</script>
</body>
</html>
